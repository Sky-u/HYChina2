

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>危运网-专业的危险品物流平台</title>
    <meta http-equiv="pragma" content="no-cache" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta name="keywords" content="危运网,化工物流,危险品物流,危险品运输,成品油运输,化学危险品运输,化学危险品物流,危化品运输,危险化学品运输" />
    <meta name="description" content="危运网，危险品运输专业平台，是中国专业、信息更新及时的危险品物流服务平台之一。中国危运网开发出专业的微信端危险品运输配货平台，现已支持所有智能手机，可免费使用。" />
    <meta http-equiv="X-UA-Compatible" content="IE=8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <script src="./js/plugins/jquery/jquery.min.js"></script>
    <script src="./js/plugins/jquery/jquery.form.js"></script>
    <script src="./js/plugins/layer/layer.js"></script>
    <script src="./js/plugins/js/WdatePicker.js"></script>
    <script src="./js/plugins/js/mall.js"></script>
    <script src="./js/plugins/js/validate.js"></script>
    <script src="./js/plugins/js/util.js"></script>
    <script src="./js/plugins/js/ss.js"></script>
    <link rel="stylesheet" href="./css/module.css">
    <link rel="stylesheet" href="./css/header.css">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/footer.css">
    <link rel="stylesheet" href="./css/alert.css">
    <script type="text/javascript" src="./js/plugins/js/qc_loader.js" data-appid="101358714" charset="utf-8"></script>

</head>
<body>
<div class="page">
    <div class="login-top">
        <div class="center">
            <div class="left"> <a href="javascript:toIndex();" class="login-logo"><img src="http://www.weiyun5.com/upload/attached/image/20190422/wyw_20190422151908.png" width="278" height="74"/></a>
                <p class="login-line">|</p>
                <p class="login-logo-p">欢迎注册</p>
            </div>
            <div class="login-re right">已有账号&nbsp;&nbsp;&nbsp;请直接<a href="./login.html" style="color:#fa662c;">登录</a></div>
        </div>
    </div>
    <div class="regiest-bg">
        <div class="register-middle">
            <form id="registerForm">
               <!-- <input name="member_qq" type="hidden" value=""/>
                <input name="member_chat" type="hidden" value=""/>-->
                <table border="0">
                    <tr>
                        <td width="100" height="65"><p>会 员 类 型</p></td>
                        <td><div class="form-item">
                            <input type="radio" name="role_id" value="0">
                            <p>生产企业</p>

                            <input type="radio" name="role_id" value="1" style="margin-left: 20px;!important;">
                            <p>经营企业</p>

                            <input type="radio" name="role_id" value="2" style="margin-left: 20px;!important;">
                            <p>个人车主</p>

                            <input type="radio" name="role_id" value="3" style="margin-left: 20px;!important;">
                            <p>企业车主</p>
                            <br />
                            <br />
                        </div></td>
                    </tr>
                    <tr>
                        <td height="65"><p>用 &nbsp;&nbsp;户&nbsp;&nbsp; 名</p></td>
                        <td><input id="username" name="username" type="text" placeholder="您的账户名或登录名" class="re-input" onblur="checkUsername()" value=""/>
                            <br />
                            <!-- <span>*用户名不能为空！</span> --></td>
                    </tr>
                    <tr>
                        <td height="65"><p>设 置 密 码</p></td>
                        <td><input name="password" type="password" placeholder="建议至少使用6-16位密码" class="re-input"  id="password" onblur="checkPassword()" />
                            <!-- <span>*用户名不能为空！</span> --></td>
                    </tr>
                    <tr>
                        <td height="65"><p>确 认密 码</p></td>
                        <td><input name="confirm_pwd" type="password" placeholder="建议再次输入密码" class="re-input" id="confirm_pwd" onblur="checkConfirmPwd()"/></td>
                    </tr>
                    <tr>
                        <td height="65"><p>邮 &nbsp;&nbsp;箱 &nbsp;&nbsp;</p></td>
                        <td><input name="email" type="text" placeholder="请输入您的邮箱" class="re-input" /></td>
                    </tr>
                    <tr>
                        <td height="65"><p>手 机 号 码</p></td>
                        <td><input id="member_mobile" name="phone" type="text" placeholder="建议使用常用手机" class="re-input" /></td>
                    </tr>



                    <tr>
                        <td height="65"><p>手 机 验 证 码</p></td>
                        <td>
                            <input name="code" type="text" placeholder="请输入手机验证码" class="re-input" />
                            <input type="button" id="mobileCodeBtn" value="获取验证码" onclick="sendMobileCode(this);" class="register-getyan"></td>
                    </tr>
                    <tr>
                        <td height="65"><p>公司名称/个人业务介绍</p></td>
                        <td><input name="company" type="text" placeholder="请输入公司名称/个人业务介绍" class="re-input" /></td>
                    </tr>
                    <tr>
                        <td height="65"><p>推荐人手机号</p></td>
                        <td><input name="recommender" type="text" placeholder="请输入推荐人手机号" class="re-input" /></td>
                    </tr>
                    <tr>
                        <td height="40" colspan="2" style="text-align:center;"><div class="erg_prot">
                            <input type="checkbox" id="cbProtocol">
                            <label for="cbProtocol">我已经阅读并同意<a href="http://www.weiyun5.com/foreground/agreement" target="_blank">《危运网用户协议书》</a></label>
                        </div></td>
                    </tr>
                    <tr>
                        <td colspan="2" height="65" style="text-align:center;"><input name="" type="button" value="立即注册" class="register-button" onclick="register();"/></td>
                    </tr>
                    <tr>
                        <td colspan="2" height="40" style="text-align:center;"><i> ©2013-2017 weiyun5.com 鲁ICP备13030353号-1</i></td>
                    </tr>
                </table>
            </form>
        </div>
    </div>
</div>

<script type="text/javascript">
    $("#codeNum").bind("click", function(event) {
        var timenow = new Date();
        $("#codeNum").attr("src","http://www.weiyun5.com/genImageCode?timenow="+timenow);
    });
    function toIndex(){
        QC.Login.signOut();
        top.window.location.href = "http://www.weiyun5.com/";
    }


    //检查用户名
    function checkUsername() {
        let username=document.getElementById("username").value;
        //1.判断用户名是否为空
        if (username===''){
            alert("用户名不得为空");
            return;
        }
        //2.检查该用户名是否已存在
        $.ajax({
            type:"post",
            url:"http://api.wlkg.com/api/user/checkUsername",
            data:{username},
            error:function () {
                alert("该用户名已存在")
            }
        })
    }
    
    
    //检查密码
    function checkPassword() {
        let password=document.getElementById("password").value;
        //1.判断密码是否为空
        if (password===''){
            alert("请输入密码");
            return;
        }
        //2.判断密码是否符合规则
        let reg=new RegExp("[\\w]{6,16}");
        if (!reg.test(password)){
            alert("密码必须为6~16位的数字、字母、下划线");
        }
    }

    //检查确认密码
    function checkConfirmPwd() {
        let password=document.getElementById("password").value;
        let confirm_pwd=document.getElementById("confirm_pwd").value;
        if (confirm_pwd!=password){
            alert("两次密码输入不一致，请重新输入")
        }
    }



    //注册
    function register(){
        if(byId("cbProtocol").checked){
            $.ajax({
                type:'post',
                url:'http://api.wlkg.com/api/user/register',
                data:$("#registerForm").serialize(),
                dataType: "json",
                success:function(data) {
                    logining = false;
                    if (data) {
                        alert("注册成功");
                        top.window.location.href = "http://www.wlkg.com/login.html";
                    }
                }
            });
        }else{
            alert("请阅读危运网用户协议")
        }
    }


    /*function register(){
        if(byId("cbProtocol").checked){
            var pwd= byId("password").value;
            var repwd = byId("confirm_pwd").value;
            if(pwd != repwd ){
                alert("两次密码不一致");
                return;
            }
            $.ajax({
                type:'post',
                url:'http://api.wlkg.com/api/user/register',
                data:$("#registerForm").serialize(),
                xhrFields: {
                    withCredentials: true
                },
                dataType: "json",
                success:function(data) {
                    alert(data);
                    if (data=="true") {

                        // top.window.location.href = "/";
                        alert("注册成功！");
                    } else {
                        var error = [];
                        for (var key in data) {
                            error.push(data[key] + "\n");
                        }
                        layer.alert(error.join(""));
                        var timenow = new Date();
                        $("#codeNum").attr("src","http://localhost:8766/getImageCode?timenow="+timenow);
                    }
                }
            });
        }else{
            layer.alert("请阅读危运网用户协议")
        }
    }*/

    //发送手机验证码
    var _wait = 60;
    function sendMobileCode(btn) {
        if (btn==null){
            alert("请输入手机号");
            return;
        }
        if(_wait==60){
            $.ajax({
                type : 'post',
                url : 'http://api.wlkg.com/api/user/getMobileCode',
                data : "number=1&mobile=" + byId("member_mobile").value,
                success : function(data) {
                    if ($.trim(data) == "success") {
                        var mobileCodeBtn = $(btn);
                        var timer = setInterval(function() {
                            mobileCodeBtn.val("重新发送(" + _wait + ")");
                            _wait--;
                            if (_wait <= 0) {
                                clearInterval(timer);
                                mobileCodeBtn.val("重新获取验证码");
                                _wait = 60;
                            }
                        }, 1000);
                    } else {
                        var error = [];
                        for (var key in data) {
                            error.push(data[key] + "\n");
                        }
                        layer.alert(error.join(""));
                    }
                }
            });
        }else{
            layer.alert("请"+_wait+"秒后再次获取");
        }
    }
</script>
</body>
</html>
